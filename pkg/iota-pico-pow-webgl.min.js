!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("@iota-pico/pow-webgl",[],e):"object"==typeof exports?exports["@iota-pico/pow-webgl"]=e():t.IotaPicoPowWebgl=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=15)}([function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,i;return e=t,i=[{key:"isEmpty",value:function(t){return null===t||void 0===t}},{key:"isObject",value:function(t){return null!==t&&void 0!==t&&("object"===n(t)&&!Array.isArray(t))}},{key:"isType",value:function(e,r){var n=t.getClassName(e);return void 0!==n&&n===t.getClassName(r)}},{key:"getClassName",value:function(t){if(null!==t&&void 0!==t){var e=("function"==typeof t?t.toString():t.constructor.toString()).match(/\w+/g);return e&&e.length>1?e[1]:void 0}}}],(r=null)&&o(e.prototype,r),i&&o(e,i),t}();e.ObjectHelper=i},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(e,"__esModule",{value:!0});var i=r(8),a=function(t){function e(t,r,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n))).domain="Crypto",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CoreError),e}();e.CryptoError=a},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),i=r(9),a=r(4),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._trytes=e}var e,r,s;return e=t,s=[{key:"fromString",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!i.StringHelper.isString(e))throw new a.DataError("The value must be a non empty string");if(!o.NumberHelper.isInteger(r)||r<0)throw new a.DataError("The length must be >= 0");if(!t.isValid(e,r))throw new a.DataError("The value and length do not contain valid trytes",{value:e,length:r});return new t(e)}},{key:"isValid",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!!i.StringHelper.isString(t)&&new RegExp("^[9A-Z]{".concat(e||"0,","}$")).test(t)}}],(r=[{key:"toString",value:function(){return this._trytes}},{key:"length",value:function(){return this._trytes.length}},{key:"sub",value:function(e,r){if(!o.NumberHelper.isInteger(e)||e<0)throw new a.DataError("The start must be a number >= 0");if(!o.NumberHelper.isInteger(r)||e+r>this._trytes.length)throw new a.DataError("The start + length must <= ".concat(this._trytes.length));return t.fromString(this._trytes.substr(e,r))}}])&&n(e.prototype,r),s&&n(e,s),t}();s.ALPHABET="9ABCDEFGHIJKLMNOPQRSTUVWXYZ",e.Trytes=s},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,o;return e=t,o=[{key:"isInteger",value:function(t){return Number.isInteger(t)&&!Number.isNaN(t)&&Number.isFinite(t)}},{key:"isNumber",value:function(t){return void 0!==t&&null!==t&&"number"==typeof t&&!Number.isNaN(t)&&Number.isFinite(t)}},{key:"isFloatString",value:function(t){return/^-?\d*\.?\d+$/.test(t)}},{key:"isIntegerString",value:function(t){return/^-?\d+$/.test(t)}}],(r=null)&&n(e.prototype,r),o&&n(e,o),t}();e.NumberHelper=o},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(e,"__esModule",{value:!0});var i=r(8),a=function(t){function e(t,r,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,n))).domain="Data",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CoreError),e}();e.DataError=a},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=r(4),a=r(2),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._trytes=e}var e,r,s;return e=t,s=[{key:"fromTrytes",value:function(e){if(!o.ObjectHelper.isType(e,a.Trytes))throw new i.DataError("The hash should be a valid Trytes object");var r=e.length();if(r!==t.LENGTH)throw new i.DataError("The hash should be ".concat(t.LENGTH," characters in length"),{length:r});return new t(e)}}],(r=[{key:"toTrytes",value:function(){return this._trytes}},{key:"toString",value:function(){return this._trytes.toString()}}])&&n(e.prototype,r),s&&n(e,s),t}();s.LENGTH=81,s.EMPTY=s.fromTrytes(a.Trytes.fromString("9".repeat(s.LENGTH))),e.Hash=s},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(10),i=r(3),a=r(0),s=r(4),u=r(2),c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._trits=e}var e,r,c;return e=t,c=[{key:"fromArray",value:function(e){if(!a.ObjectHelper.isType(e,Int8Array))throw new s.DataError("The value does not contain valid trits");return new t(e)}},{key:"fromNumberArray",value:function(e){if(!o.ArrayHelper.isTyped(e,Number))throw new s.DataError("The value does not contain valid trits");return new t(new Int8Array(e))}},{key:"fromTrytes",value:function(e){if(!a.ObjectHelper.isType(e,u.Trytes))throw new s.DataError("The value should be a valid Trytes object");for(var r=e.toString(),n=new Int8Array(3*r.length),o=0;o<r.length;o++){var i=u.Trytes.ALPHABET.indexOf(r.charAt(o));n[3*o]=t.TRYTES_TRITS[i][0],n[3*o+1]=t.TRYTES_TRITS[i][1],n[3*o+2]=t.TRYTES_TRITS[i][2]}return new t(n)}},{key:"fromNumber",value:function(e){if(!i.NumberHelper.isInteger(e))throw new s.DataError("The value is not an integer");for(var r=[],n=e<0?-e:e;n>0;){var o=n%3;n=Math.floor(n/3),o>1&&(o=-1,n++),r[r.length]=o}if(e<0)for(var a=0;a<r.length;a++)r[a]=-r[a];return new t(new Int8Array(r))}},{key:"add",value:function(e,r){if(!a.ObjectHelper.isType(e,t))throw new s.DataError("The first should be a valid Trits object");if(!a.ObjectHelper.isType(r,t))throw new s.DataError("The seconds should be a valid Trits object");for(var n,o,i=new Int8Array(Math.max(e._trits.length,r._trits.length)),u=0,c=0;c<i.length;c++){n=c<e._trits.length?e._trits[c]:0,o=c<r._trits.length?r._trits[c]:0;var f=t.fullAdd(n,o,u);i[c]=f[0],u=f[1]}return t.fromArray(i)}},{key:"fullAdd",value:function(e,r,n){var o=t.sum(e,r),i=t.cons(e,r),a=t.cons(o,n),s=t.any(i,a),u=t.sum(o,n);return new Int8Array([u,s])}},{key:"sum",value:function(t,e){var r=t+e;switch(r){case 2:return-1;case-2:return 1;default:return r}}},{key:"cons",value:function(t,e){return t===e?t:0}},{key:"any",value:function(t,e){var r=t+e;return r>0?1:r<0?-1:0}}],(r=[{key:"toArray",value:function(){return this._trits}},{key:"toNumberArray",value:function(){return Array.from(this._trits)}},{key:"toTrytes",value:function(){for(var e="",r=0;r<this._trits.length;r+=3)for(var n=0;n<u.Trytes.ALPHABET.length;n++)if(t.TRYTES_TRITS[n][0]===this._trits[r]&&t.TRYTES_TRITS[n][1]===this._trits[r+1]&&t.TRYTES_TRITS[n][2]===this._trits[r+2]){e+=u.Trytes.ALPHABET.charAt(n);break}return u.Trytes.fromString(e)}},{key:"toNumber",value:function(){for(var t=0,e=this._trits.length-1;e>=0;e--)t=3*t+this._trits[e];return t}},{key:"length",value:function(){return this._trits.length}},{key:"sub",value:function(e,r){if(!i.NumberHelper.isInteger(e)||e<0)throw new s.DataError("The start must be a number >= 0");if(!i.NumberHelper.isInteger(r)||e+r>this._trits.length)throw new s.DataError("The start + length must <= ".concat(this._trits.length));return t.fromArray(this._trits.slice(e,e+r))}}])&&n(e.prototype,r),c&&n(e,c),t}();c.TRYTES_TRITS=[new Int8Array([0,0,0]),new Int8Array([1,0,0]),new Int8Array([-1,1,0]),new Int8Array([0,1,0]),new Int8Array([1,1,0]),new Int8Array([-1,-1,1]),new Int8Array([0,-1,1]),new Int8Array([1,-1,1]),new Int8Array([-1,0,1]),new Int8Array([0,0,1]),new Int8Array([1,0,1]),new Int8Array([-1,1,1]),new Int8Array([0,1,1]),new Int8Array([1,1,1]),new Int8Array([-1,-1,-1]),new Int8Array([0,-1,-1]),new Int8Array([1,-1,-1]),new Int8Array([-1,0,-1]),new Int8Array([0,0,-1]),new Int8Array([1,0,-1]),new Int8Array([-1,1,-1]),new Int8Array([0,1,-1]),new Int8Array([1,1,-1]),new Int8Array([-1,-1,0]),new Int8Array([0,-1,0]),new Int8Array([1,-1,0]),new Int8Array([-1,0,0])],e.Trits=c},function(t,e,r){t.exports=r(17)},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}Object.defineProperty(e,"__esModule",{value:!0});var s=r(19),u=r(9),c=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))).additional=r||{},o.innerError=n,o.domain="Core",o}var r,c,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a(Error)),r=e,f=[{key:"isError",value:function(t){return void 0!==t&&null!==t&&"object"===n(t)&&"message"in t&&"additional"in t}}],(c=[{key:"format",value:function(){var t=this,e="";u.StringHelper.isEmpty(this.domain)||(e+="".concat(this.domain,": ")),u.StringHelper.isEmpty(this.message)||(e+="".concat(this.message));var r=Object.keys(this.additional);return r.length>0&&(e.length>0&&(e+="\n"),r.forEach(function(r){e+="\t".concat(r,": ").concat(s.JsonHelper.stringify(t.additional[r]),"\n")})),e}}])&&o(r.prototype,c),f&&o(r,f),e}();e.CoreError=c},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,o;return e=t,o=[{key:"isString",value:function(t){return null!==t&&void 0!==t&&"[object String]"===Object.prototype.toString.call(t)}},{key:"isEmpty",value:function(e){return!t.isString(e)||0===e.length}},{key:"isAscii",value:function(t){return null!==t&&void 0!==t&&/^[\x00-\xFF]*$/.test(t)}},{key:"encodeNonASCII",value:function(e){return t.isString(e)?e.replace(/[\u007F-\uFFFF]/g,function(t){return"\\u".concat("0000".concat(t.charCodeAt(0).toString(16)).substr(-4))}):void 0}},{key:"decodeNonASCII",value:function(e){return t.isString(e)?e.replace(/\\u([\d\w]{4})/gi,function(t,e){return String.fromCharCode(parseInt(e,16))}):void 0}}],(r=null)&&n(e.prototype,r),o&&n(e,o),t}();e.StringHelper=o},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,i;return e=t,i=[{key:"isArray",value:function(t){return null!==t&&void 0!==t&&Array.isArray(t)}},{key:"isEmpty",value:function(e){return!t.isArray(e)||0===e.length}},{key:"isTyped",value:function(e,r){return!t.isEmpty(e)&&!e.includes(void 0)&&!e.includes(null)&&e.every(function(t){return o.ObjectHelper.isType(t,r)})}}],(r=null)&&n(e.prototype,r),i&&n(e,i),t}();e.ArrayHelper=i},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=r(4),a=r(2),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._trytes=e}var e,r,s;return e=t,s=[{key:"fromTrytes",value:function(e){if(!o.ObjectHelper.isType(e,a.Trytes))throw new i.DataError("The tag should be a valid Trytes object");var r=e.toString();if(r.length>t.LENGTH)throw new i.DataError("The tag should be at most ".concat(t.LENGTH," characters in length"),{length:r.length});for(;r.length<t.LENGTH;)r+="9";return new t(r)}}],(r=[{key:"toTrytes",value:function(){return a.Trytes.fromString(this._trytes)}},{key:"toString",value:function(){return this._trytes}}])&&n(e.prototype,r),s&&n(e,s),t}();s.LENGTH=27,s.EMPTY=s.fromTrytes(a.Trytes.fromString("9".repeat(s.LENGTH))),e.Tag=s},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=r(4),a=r(25),s=r(5),u=r(26),c=r(11),f=r(13),l=r(2),h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,h;return e=t,h=[{key:"fromParams",value:function(e,r,n,o,i,a,s,u,c,l,h,y,p,v,m){var b=new t;return b.signatureMessageFragment=e,b.address=r,b.value=f.TryteNumber.fromNumber(n,11),b.obsoleteTag=o,b.timestamp=f.TryteNumber.fromNumber(i),b.currentIndex=f.TryteNumber.fromNumber(a),b.lastIndex=f.TryteNumber.fromNumber(s),b.bundle=u,b.trunkTransaction=c,b.branchTransaction=l,b.tag=h,b.attachmentTimestamp=f.TryteNumber.fromNumber(y),b.attachmentTimestampLowerBound=f.TryteNumber.fromNumber(p),b.attachmentTimestampUpperBound=f.TryteNumber.fromNumber(v),b.nonce=m,b}},{key:"fromTrytes",value:function(e){if(!o.ObjectHelper.isType(e,l.Trytes))throw new i.DataError("The trytes should be a valid Trytes object");var r=e.length();if(r!==t.LENGTH)throw new i.DataError("The trytes must be ".concat(t.LENGTH," in length"),{length:r});var n=e.sub(2279,16).toString();if(n!==t.CHECK_VALUE)throw new i.DataError("The trytes between ".concat(2279," and ").concat(2295," should be all 9s"),{check:n});var h=new t,y=0;return h.signatureMessageFragment=u.SignatureMessageFragment.fromTrytes(e.sub(y,u.SignatureMessageFragment.LENGTH)),y+=u.SignatureMessageFragment.LENGTH,h.address=a.Address.fromTrytes(e.sub(y,a.Address.LENGTH)),y+=a.Address.LENGTH,h.value=f.TryteNumber.fromTrytes(e.sub(y,11),11),y+=11,y+=t.CHECK_VALUE_LENGTH,h.obsoleteTag=c.Tag.fromTrytes(e.sub(y,c.Tag.LENGTH)),y+=c.Tag.LENGTH,h.timestamp=f.TryteNumber.fromTrytes(e.sub(y,f.TryteNumber.LENGTH_9)),y+=f.TryteNumber.LENGTH_9,h.currentIndex=f.TryteNumber.fromTrytes(e.sub(y,f.TryteNumber.LENGTH_9)),y+=f.TryteNumber.LENGTH_9,h.lastIndex=f.TryteNumber.fromTrytes(e.sub(y,f.TryteNumber.LENGTH_9)),y+=f.TryteNumber.LENGTH_9,h.bundle=s.Hash.fromTrytes(e.sub(y,s.Hash.LENGTH)),y+=s.Hash.LENGTH,h.trunkTransaction=s.Hash.fromTrytes(e.sub(y,s.Hash.LENGTH)),y+=s.Hash.LENGTH,h.branchTransaction=s.Hash.fromTrytes(e.sub(y,s.Hash.LENGTH)),y+=s.Hash.LENGTH,h.tag=c.Tag.fromTrytes(e.sub(y,c.Tag.LENGTH)),y+=c.Tag.LENGTH,h.attachmentTimestamp=f.TryteNumber.fromTrytes(e.sub(y,f.TryteNumber.LENGTH_9)),y+=f.TryteNumber.LENGTH_9,h.attachmentTimestampLowerBound=f.TryteNumber.fromTrytes(e.sub(y,f.TryteNumber.LENGTH_9)),y+=f.TryteNumber.LENGTH_9,h.attachmentTimestampUpperBound=f.TryteNumber.fromTrytes(e.sub(y,f.TryteNumber.LENGTH_9)),y+=f.TryteNumber.LENGTH_9,h.nonce=c.Tag.fromTrytes(e.sub(y,c.Tag.LENGTH)),h}}],(r=[{key:"toTrytes",value:function(){if(!o.ObjectHelper.isType(this.signatureMessageFragment,u.SignatureMessageFragment))throw new i.DataError("The signatureMessageFragment must be set to create transaction trytes",{signatureMessageFragment:this.signatureMessageFragment});if(!o.ObjectHelper.isType(this.address,a.Address))throw new i.DataError("The address must be set to create transaction trytes",{address:this.address});if(!o.ObjectHelper.isType(this.obsoleteTag,c.Tag))throw new i.DataError("The obsoleteTag must be set to create transaction trytes",{obsoleteTag:this.obsoleteTag});if(!o.ObjectHelper.isType(this.bundle,s.Hash))throw new i.DataError("The bundle must be set to create transaction trytes",{bundle:this.bundle});if(!o.ObjectHelper.isType(this.trunkTransaction,s.Hash))throw new i.DataError("The trunkTransaction must be set to create transaction trytes",{trunkTransaction:this.trunkTransaction});if(!o.ObjectHelper.isType(this.branchTransaction,s.Hash))throw new i.DataError("The branchTransaction must be set to create transaction trytes",{branchTransaction:this.branchTransaction});if(!o.ObjectHelper.isType(this.nonce,c.Tag))throw new i.DataError("The nonce must be set to create transaction trytes",{nonce:this.nonce});var e=this.signatureMessageFragment.toTrytes().toString()+this.address.toTrytes().toString()+(this.value||t.EMPTY_11).toTrytes().toString()+t.CHECK_VALUE+this.obsoleteTag.toTrytes().toString()+(this.timestamp||f.TryteNumber.EMPTY_9).toTrytes().toString()+(this.currentIndex||f.TryteNumber.EMPTY_9).toTrytes().toString()+(this.lastIndex||f.TryteNumber.EMPTY_9).toTrytes().toString()+this.bundle.toTrytes().toString()+this.trunkTransaction.toTrytes().toString()+this.branchTransaction.toTrytes().toString()+(this.tag||this.obsoleteTag).toTrytes().toString()+(this.attachmentTimestamp||f.TryteNumber.EMPTY_9).toTrytes().toString()+(this.attachmentTimestampLowerBound||f.TryteNumber.EMPTY_9).toTrytes().toString()+(this.attachmentTimestampUpperBound||f.TryteNumber.EMPTY_9).toTrytes().toString()+this.nonce.toTrytes().toString(),r=e.length;if(r!==t.LENGTH)throw new i.DataError("The trytes must be ".concat(t.LENGTH," in length ").concat(r),{length:r});return l.Trytes.fromString(e)}},{key:"toString",value:function(){return'{\n\tsignatureMessageFragment: "'.concat((this.signatureMessageFragment||u.SignatureMessageFragment.EMPTY).toTrytes().toString(),'"\n\taddress: "').concat((this.address||a.Address.EMPTY).toTrytes().toString(),'"\n\tvalue: ').concat((this.value||t.EMPTY_11).toNumber(),'\n\tobsoleteTag: "').concat((this.obsoleteTag||c.Tag.EMPTY).toTrytes().toString(),'"\n\ttimestamp: ').concat((this.timestamp||f.TryteNumber.EMPTY_9).toNumber(),"\n\tcurrentIndex: ").concat((this.currentIndex||f.TryteNumber.EMPTY_9).toNumber(),"\n\tlastIndex: ").concat((this.lastIndex||f.TryteNumber.EMPTY_9).toNumber(),'\n\tbundle: "').concat((this.bundle||s.Hash.EMPTY).toTrytes().toString(),'"\n\ttrunkTransaction: "').concat((this.trunkTransaction||s.Hash.EMPTY).toTrytes().toString(),'"\n\tbranchTransaction: "').concat((this.branchTransaction||s.Hash.EMPTY).toTrytes().toString(),'"\n\ttag: "').concat((this.tag||this.obsoleteTag||c.Tag.EMPTY).toTrytes().toString(),'"\n\tattachmentTimestamp: ').concat((this.attachmentTimestamp||f.TryteNumber.EMPTY_9).toNumber(),"\n\tattachmentTimestampLowerBound: ").concat((this.attachmentTimestampLowerBound||f.TryteNumber.EMPTY_9).toNumber(),"\n\tattachmentTimestampUpperBound: ").concat((this.attachmentTimestampUpperBound||f.TryteNumber.EMPTY_9).toNumber(),'\n\tnonce: "').concat((this.nonce||c.Tag.EMPTY).toTrytes().toString(),'"\n}')}}])&&n(e.prototype,r),h&&n(e,h),t}();h.LENGTH=2673,h.CHECK_VALUE_LENGTH=16,h.CHECK_VALUE="9".repeat(h.CHECK_VALUE_LENGTH),h.EMPTY_11=f.TryteNumber.fromNumber(0,11),e.Transaction=h},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),i=r(0),a=r(4),s=r(6),u=r(2),c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._trytes=e}var e,r,c;return e=t,c=[{key:"fromNumber",value:function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.LENGTH_9;if(!o.NumberHelper.isInteger(n)||n<=0)throw new a.DataError("The length should be a number > 0",{length:n});if(i.ObjectHelper.isEmpty(e))r="9".repeat(n);else{if(!o.NumberHelper.isInteger(e))throw new a.DataError("The value is not an integer",{value:e});for(var u=s.Trits.fromNumber(e).toNumberArray();u.length<3*n;)u.push(0);r=s.Trits.fromNumberArray(u).toTrytes().toString()}return new t(r)}},{key:"fromTrytes",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.LENGTH_9;if(!i.ObjectHelper.isType(e,u.Trytes))throw new a.DataError("The value should be a valid Trytes object");var n=e.toString();if(!o.NumberHelper.isInteger(r)||r<=0)throw new a.DataError("The length should be a number > 0",{length:r});if(n.length>r)throw new a.DataError("The value contains too many characters",{length:n.length});for(;n.length<r;)n+="9";return new t(n)}}],(r=[{key:"toTrytes",value:function(){return u.Trytes.fromString(this._trytes)}},{key:"toNumber",value:function(){return s.Trits.fromTrytes(u.Trytes.fromString(this._trytes)).toNumber()}},{key:"toString",value:function(){return this._trytes}},{key:"valueOf",value:function(){return this.toNumber()}}])&&n(e.prototype,r),c&&n(e,c),t}();c.LENGTH_9=9,c.EMPTY_9=c.fromNumber(0,c.LENGTH_9),e.TryteNumber=c},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(e,"__esModule",{value:!0});var a=r(28),s=r(29),u=r(30),c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}var r,n,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.FactoryBase),r=e,c=[{key:"instance",value:function(){return e._instance||(e._instance=new e,e._instance.register("curl",function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return new(Function.prototype.bind.apply(s.Curl,[null].concat(e)))}),e._instance.register("kerl",function(){return new u.Kerl})),e._instance}}],(n=[{key:"getInstance",value:function(){return e.instance()}}])&&o(r.prototype,n),c&&o(r,c),e}();e.SpongeFactory=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(16))},function(t,e,r){"use strict";var n,o=(n=r(7))&&n.__esModule?n:{default:n};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t,e){try{var r=i[t](e),a=r.value}catch(t){return void o(t)}r.done?n(a):Promise.resolve(a).then(s,u)}function s(t){a("next",t)}function u(t){a("throw",t)}s()})}}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:c(o,e,r)}if("value"in n)return n.value;var i=n.get;return void 0!==i?i.call(r):void 0}Object.defineProperty(e,"__esModule",{value:!0});var f=r(3),l=r(0),h=r(1),y=r(20),p=r(2),v=r(35),m=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r)),l.ObjectHelper.isEmpty(t)?n._webGLPlatform={getWindow:function(){return window},getDocument:function(t){return t.document},getCanvas:function(t){return t.createElement("canvas")},getWebGL:function(t){return t.getContext("webgl2",{alpha:!1,antialias:!1})}}:n._webGLPlatform=t,n}var r,n,i,m,b;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,y.ProofOfWorkBase),r=e,(n=[{key:"initialize",value:(b=a(o.default.mark(function t(){var r=this;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initialize",this).call(this);case 2:return t.abrupt("return",new Promise(function(t,e){try{v.PearlDiver.initialize(r._webGLPlatform),r._isInitialized=!0,t()}catch(t){e(t)}}));case 3:case"end":return t.stop()}},t,this)})),function(){return b.apply(this,arguments)})},{key:"singlePow",value:(m=a(o.default.mark(function t(e,r){var n,i,a;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._isInitialized){t.next=2;break}throw new h.CryptoError("WebGL is not initialized, have you called initialize");case 2:if(l.ObjectHelper.isType(e,p.Trytes)){t.next=4;break}throw new h.CryptoError("The trytes must be an object of type Trytes");case 4:if(f.NumberHelper.isInteger(r)&&!(r<=0)){t.next=6;break}throw new h.CryptoError("The minWeightMagnitude must be > 0");case 6:return t.next=8,v.PearlDiver.instance.searchWithTrytes(e,r);case 8:return n=t.sent,i=e.toString(),a=n.toString(),t.abrupt("return",p.Trytes.fromString(i.substr(0,i.length-a.length).concat(a)));case 12:case"end":return t.stop()}},t,this)})),function(t,e){return m.apply(this,arguments)})}])&&s(r.prototype,n),i&&s(r,i),e}();e.ProofOfWorkWebGl=m},function(t,e,r){var n=function(){return this}()||Function("return this")(),o=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,i=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r(18),o)n.regeneratorRuntime=i;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var r,n=Object.prototype,o=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag",c="object"==typeof t,f=e.regeneratorRuntime;if(f)c&&(t.exports=f);else{(f=e.regeneratorRuntime=c?t.exports:{}).wrap=g;var l="suspendedStart",h="suspendedYield",y="executing",p="completed",v={},m={};m[a]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(O([])));_&&_!==n&&o.call(_,a)&&(m=_);var d=H.prototype=w.prototype=Object.create(m);E.prototype=d.constructor=H,H.constructor=E,H[u]=E.displayName="GeneratorFunction",f.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},f.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,H):(t.__proto__=H,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(d),t},f.awrap=function(t){return{__await:t}},S(L.prototype),L.prototype[s]=function(){return this},f.AsyncIterator=L,f.async=function(t,e,r,n){var o=new L(g(t,e,r,n));return f.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},S(d),d[u]="Generator",d[a]=function(){return this},d.toString=function(){return"[object Generator]"},f.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},f.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return s.type="throw",s.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}}}function g(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),a=new k(n||[]);return i._invoke=function(t,e,r){var n=l;return function(o,i){if(n===y)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return I()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=N(a,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=y;var u=T(t,e,r);if("normal"===u.type){if(n=r.done?p:h,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function T(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function w(){}function E(){}function H(){}function S(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function L(t){var e;this._invoke=function(r,n){function i(){return new Promise(function(e,i){!function e(r,n,i,a){var s=T(t[r],t,n);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&o.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(c).then(function(t){u.value=t,i(u)},a)}a(s.arg)}(r,n,e,i)})}return e=e?e.then(i,i):i()}}function N(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,N(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=T(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:I}}function I(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,i;return e=t,i=[{key:"stringify",value:function(t,e,r){var o=[];return JSON.stringify(t,function(r,i){if("object"===n(i)&&null!==t&&void 0!==i){if(-1!==o.indexOf(i))return;o.push(i)}return e?e(r,i):i},r)}}],(r=null)&&o(e.prototype,r),i&&o(e,i),t}();e.JsonHelper=i},function(t,e,r){"use strict";var n,o=(n=r(21))&&n.__esModule?n:{default:n};function i(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t,e){try{var r=i[t](e),a=r.value}catch(t){return void o(t)}r.done?n(a):Promise.resolve(a).then(s,u)}function s(t){a("next",t)}function u(t){a("throw",t)}s()})}}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var s=r(10),u=r(3),c=r(0),f=r(24),l=r(5),h=r(11),y=r(12),p=r(13),v=r(2),m=r(1),b=r(27),_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._timeService=e||new f.TimeService}var e,r,n,_,d;return e=t,(r=[{key:"initialize",value:(d=i(o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve());case 1:case"end":return t.stop()}},t,this)})),function(){return d.apply(this,arguments)})},{key:"pow",value:(_=i(o.default.mark(function e(r,n,i,a){var f,_,d,g,T,w,E;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c.ObjectHelper.isType(r,l.Hash)){e.next=2;break}throw new m.CryptoError("The trunkTransaction must be an object of type Hash");case 2:if(c.ObjectHelper.isType(n,l.Hash)){e.next=4;break}throw new m.CryptoError("The branchTransaction must be an object of type Hash");case 4:if(s.ArrayHelper.isTyped(i,v.Trytes)){e.next=6;break}throw new m.CryptoError("The trytes must be an array of type Trytes");case 6:if(u.NumberHelper.isInteger(a)&&!(a<=0)){e.next=8;break}throw new m.CryptoError("The minWeightMagnitude must be > 0");case 8:f=[],d=0;case 10:if(!(d<i.length)){e.next=35;break}if((g=y.Transaction.fromTrytes(i[d])).attachmentTimestamp=p.TryteNumber.fromNumber(this._timeService.msSinceEpoch()),g.attachmentTimestampLowerBound=p.TryteNumber.fromNumber(0),g.attachmentTimestampUpperBound=p.TryteNumber.fromNumber(t.MAX_TIMESTAMP_VALUE),!c.ObjectHelper.isEmpty(_)){e.next=22;break}if(g.lastIndex.toNumber()===g.currentIndex.toNumber()){e.next=18;break}throw new m.CryptoError("Wrong bundle order. The bundle should be ordered in descending order from currentIndex");case 18:g.trunkTransaction=r,g.branchTransaction=n,e.next=24;break;case 22:g.trunkTransaction=_,g.branchTransaction=r;case 24:return T=g.toTrytes(),e.next=27,this.singlePow(T,a);case 27:w=e.sent,g.nonce=h.Tag.fromTrytes(w.sub(y.Transaction.LENGTH-h.Tag.LENGTH,h.Tag.LENGTH)),E=y.Transaction.fromTrytes(w),_=b.TransactionHelper.hash(E),f.push(E);case 32:d++,e.next=10;break;case 35:return e.abrupt("return",f.reverse().map(function(t){return t.toTrytes()}));case 36:case"end":return e.stop()}},e,this)})),function(t,e,r,n){return _.apply(this,arguments)})}])&&a(e.prototype,r),n&&a(e,n),t}();_.MAX_TIMESTAMP_VALUE=(Math.pow(3,27)-1)/2,e.ProofOfWorkBase=_},function(t,e,r){t.exports=r(22)},function(t,e,r){var n=function(){return this}()||Function("return this")(),o=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,i=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r(23),o)n.regeneratorRuntime=i;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var r,n=Object.prototype,o=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag",c="object"==typeof t,f=e.regeneratorRuntime;if(f)c&&(t.exports=f);else{(f=e.regeneratorRuntime=c?t.exports:{}).wrap=g;var l="suspendedStart",h="suspendedYield",y="executing",p="completed",v={},m={};m[a]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(O([])));_&&_!==n&&o.call(_,a)&&(m=_);var d=H.prototype=w.prototype=Object.create(m);E.prototype=d.constructor=H,H.constructor=E,H[u]=E.displayName="GeneratorFunction",f.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},f.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,H):(t.__proto__=H,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(d),t},f.awrap=function(t){return{__await:t}},S(L.prototype),L.prototype[s]=function(){return this},f.AsyncIterator=L,f.async=function(t,e,r,n){var o=new L(g(t,e,r,n));return f.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},S(d),d[u]="Generator",d[a]=function(){return this},d.toString=function(){return"[object Generator]"},f.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},f.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return s.type="throw",s.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}}}function g(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),a=new k(n||[]);return i._invoke=function(t,e,r){var n=l;return function(o,i){if(n===y)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return I()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=N(a,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=y;var u=T(t,e,r);if("normal"===u.type){if(n=r.done?p:h,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function T(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function w(){}function E(){}function H(){}function S(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function L(t){var e;this._invoke=function(r,n){function i(){return new Promise(function(e,i){!function e(r,n,i,a){var s=T(t[r],t,n);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&o.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(c).then(function(t){u.value=t,i(u)},a)}a(s.arg)}(r,n,e,i)})}return e=e?e.then(i,i):i()}}function N(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,N(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=T(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:I}}function I(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,o;return e=t,(r=[{key:"msSinceEpoch",value:function(){return Date.now()}}])&&n(e.prototype,r),o&&n(e,o),t}();e.TimeService=o},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=r(4),a=r(2),s=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._addressTrytes=e,this._checksumTrytes=r}var e,r,s;return e=t,s=[{key:"fromTrytes",value:function(e){if(!o.ObjectHelper.isType(e,a.Trytes))throw new i.DataError("The address should be a valid Trytes object");var r=e.toString();if(r.length!==t.LENGTH&&r.length!==t.LENGTH_WITH_CHECKSUM)throw new i.DataError("The address should either be ".concat(t.LENGTH," or ").concat(t.LENGTH_WITH_CHECKSUM," characters in length"),{length:r.length});var n,s=r.substr(0,t.LENGTH);return r.length===t.LENGTH_WITH_CHECKSUM&&(n=r.substr(t.LENGTH)),new t(s,n)}}],(r=[{key:"toTrytes",value:function(){return a.Trytes.fromString(this._addressTrytes)}},{key:"toTrytesWithChecksum",value:function(){if(o.ObjectHelper.isEmpty(this._checksumTrytes))throw new i.DataError("This address has no checksum calculated for it");return a.Trytes.fromString(this._addressTrytes+this._checksumTrytes)}},{key:"toString",value:function(){return o.ObjectHelper.isEmpty(this._checksumTrytes)?this._addressTrytes:this._addressTrytes+this._checksumTrytes}}])&&n(e.prototype,r),s&&n(e,s),t}();s.LENGTH=81,s.LENGTH_CHECKSUM=9,s.LENGTH_WITH_CHECKSUM=s.LENGTH+s.LENGTH_CHECKSUM,s.EMPTY=s.fromTrytes(a.Trytes.fromString("9".repeat(s.LENGTH))),e.Address=s},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=r(4),a=r(2),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._trytes=e}var e,r,s;return e=t,s=[{key:"fromTrytes",value:function(e){if(!o.ObjectHelper.isType(e,a.Trytes))throw new i.DataError("The signatureMessageFragment should be a valid Trytes object");var r=e.length();if(r!==t.LENGTH)throw new i.DataError("The signatureMessageFragment should be ".concat(t.LENGTH," characters in length"),{length:r});return new t(e)}}],(r=[{key:"toTrytes",value:function(){return this._trytes}},{key:"toString",value:function(){return this._trytes.toString()}}])&&n(e.prototype,r),s&&n(e,s),t}();s.LENGTH=2187,s.EMPTY=s.fromTrytes(a.Trytes.fromString("9".repeat(s.LENGTH))),e.SignatureMessageFragment=s},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=r(5),a=r(12),s=r(6),u=r(1),c=r(14),f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,f;return e=t,f=[{key:"hash",value:function(t){if(!o.ObjectHelper.isType(t,a.Transaction))throw new u.CryptoError("The transaction must be of type Transaction");var e=c.SpongeFactory.instance().create("curl"),r=s.Trits.fromTrytes(t.toTrytes()).toArray();e.initialize(),e.absorb(r,0,r.length);var n=new Int8Array(e.getConstant("HASH_LENGTH"));return e.squeeze(n,0,n.length),i.Hash.fromTrytes(s.Trits.fromArray(n).toTrytes())}}],(r=null)&&n(e.prototype,r),f&&n(e,f),t}();e.TransactionHelper=f},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._types={}}var e,r,o;return e=t,(r=[{key:"register",value:function(t,e){this.getInstance()._types[t]=e}},{key:"unregister",value:function(t){delete this.getInstance()._types[t]}},{key:"exists",value:function(t){return void 0!==this.getInstance()._types[t]}},{key:"create",value:function(t){var e=this.getInstance();if(e._types[t]){for(var r,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return(r=e._types)[t].apply(r,o)}}}])&&n(e.prototype,r),o&&n(e,o),t}();e.FactoryBase=o},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),i=r(0),a=r(1),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.NUMBER_OF_ROUNDS;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._numberOfRounds=e}var e,r,s;return e=t,(r=[{key:"getConstant",value:function(e){switch(e){case"NUMBER_OF_ROUNDS":return this._numberOfRounds;case"HASH_LENGTH":case"STATE_LENGTH":return t[e];default:throw new a.CryptoError("Unknown constant requested ".concat(e))}}},{key:"getState",value:function(){return this._state}},{key:"initialize",value:function(e){this._state=e||new Int8Array(t.STATE_LENGTH)}},{key:"reset",value:function(){this.initialize()}},{key:"absorb",value:function(e,r,n){if(!i.ObjectHelper.isType(e,Int8Array)||0===e.length)throw new a.CryptoError("Trits must be a non empty Int8Array");if(!o.NumberHelper.isInteger(r)||r<0)throw new a.CryptoError("Offset must be a number >= 0");if(!o.NumberHelper.isInteger(n)||n<0)throw new a.CryptoError("Length must be a number >= 0");if(n+r>e.length)throw new a.CryptoError("The offset + length is beyond the length of the trits");var s=r,u=n;do{for(var c=0,f=u<t.HASH_LENGTH?u:t.HASH_LENGTH;c<f;)this._state[c++]=e[s++];this.transform(),u-=t.HASH_LENGTH}while(u>0)}},{key:"squeeze",value:function(e,r,n){if(!i.ObjectHelper.isType(e,Int8Array)||0===e.length)throw new a.CryptoError("Trits must be a non empty Int8Array");if(!o.NumberHelper.isInteger(r)||r<0)throw new a.CryptoError("Offset must be a number >= 0");if(!o.NumberHelper.isInteger(n)||n<0)throw new a.CryptoError("Length must be a number >= 0");if(n+r>e.length)throw new a.CryptoError("The offset + length is beyond the length of the trits");var s=r,u=n;do{for(var c=0,f=u<t.HASH_LENGTH?n:t.HASH_LENGTH;c<f;)e[s++]=this._state[c++];this.transform(),u-=t.HASH_LENGTH}while(u>0)}},{key:"transform",value:function(){for(var e,r=0,n=0;n<this._numberOfRounds;n++){e=new Int8Array(this._state.slice());for(var o=0;o<t.STATE_LENGTH;o++)this._state[o]=t.TRUTH_TABLE[e[r]+(e[r+=r<365?364:-365]<<2)+5]}}}])&&n(e.prototype,r),s&&n(e,s),t}();s.HASH_LENGTH=243,s.NUMBER_OF_ROUNDS=81,s.STATE_LENGTH=3*s.HASH_LENGTH,s.TRUTH_TABLE=new Int8Array([1,0,-1,2,1,-1,0,2,-1,1,0]),e.Curl=s},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),i=r(0),a=r(31),s=r(1),u=r(32),c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._keccak=new a.Sha3(384,a.Sha3.KECCAK_PADDING,384)}var e,r,c;return e=t,(r=[{key:"getConstant",value:function(e){switch(e){case"HASH_LENGTH":case"BIT_HASH_LENGTH":case"BYTE_HASH_LENGTH":return t[e];default:throw new s.CryptoError("Unknown constant requested ".concat(e))}}},{key:"getState",value:function(){}},{key:"initialize",value:function(t){}},{key:"reset",value:function(){this._keccak.reset()}},{key:"absorb",value:function(e,r,n){if(!i.ObjectHelper.isType(e,Int8Array)||0===e.length)throw new s.CryptoError("Trits must be a non empty Int8Array");if(!o.NumberHelper.isInteger(r)||r<0)throw new s.CryptoError("Offset must be a number >= 0");if(!o.NumberHelper.isInteger(n)||n<0)throw new s.CryptoError("Length must be a number >= 0");if(n+r>e.length)throw new s.CryptoError("The offset + length is beyond the length of the trits");if(n%243!=0)throw new s.CryptoError("Length must be a multiple of ".concat(t.HASH_LENGTH),{length:n});var a=r,c=n;do{var f=e.slice(a,a+t.HASH_LENGTH);f[t.HASH_LENGTH-1]=0;var l=u.BigIntegerHelper.tritsToBigInteger(f,0,f.length),h=new ArrayBuffer(t.BYTE_HASH_LENGTH);u.BigIntegerHelper.bigIntegerToBytes(l,h,0),this._keccak.update(h),a+=t.HASH_LENGTH,c-=t.HASH_LENGTH}while(c>0)}},{key:"squeeze",value:function(e,r,n){if(!i.ObjectHelper.isType(e,Int8Array)||0===e.length)throw new s.CryptoError("Trits must be a non empty Int8Array");if(!o.NumberHelper.isInteger(r)||r<0)throw new s.CryptoError("Offset must be a number >= 0");if(!o.NumberHelper.isInteger(n)||n<0)throw new s.CryptoError("Length must be a number >= 0");if(n+r>e.length)throw new s.CryptoError("The offset + length is beyond the length of the trits");if(n%243!=0)throw new s.CryptoError("Length must be a multiple of ".concat(t.HASH_LENGTH),{length:n});var a=r,c=n;do{var f=this._keccak.digest(),l=u.BigIntegerHelper.bytesToBigInteger(f,0,t.BYTE_HASH_LENGTH),h=new Int8Array(t.HASH_LENGTH);u.BigIntegerHelper.bigIntegerToTrits(l,h,0,t.HASH_LENGTH),h[t.HASH_LENGTH-1]=0;for(var y=0;y<t.HASH_LENGTH;)e[a++]=h[y++];var p=new DataView(f);for(y=0;y<p.byteLength;y++)p.setUint8(y,255^p.getUint8(y));this._keccak.update(f),c-=t.HASH_LENGTH}while(c>0)}}])&&n(e.prototype,r),c&&n(e,c),t}();c.HASH_LENGTH=243,c.BIT_HASH_LENGTH=384,c.BYTE_HASH_LENGTH=c.BIT_HASH_LENGTH/8,e.Kerl=c},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=r(1),a=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._padding=r,this._outputBits=n,this._blockCount=1600-(e<<1)>>5,this._byteCount=this._blockCount<<2,this._outputBlocks=n>>5,this._extraBytes=(31&n)>>3,this.reset()}var e,r,a;return e=t,(r=[{key:"reset",value:function(){this._reset=!0,this._block=0,this._start=0,this._blocks=new Uint32Array(this._blockCount+1),this._state=new Uint32Array(50)}},{key:"update",value:function(e){if(!o.ObjectHelper.isType(e,ArrayBuffer))throw new i.CryptoError("Input is not of type ArrayBuffer");for(var r,n=new Uint8Array(e),a=n.length,s=0;s<a;){if(this._reset)for(this._reset=!1,this._blocks[0]=this._block,r=1;r<this._blockCount+1;++r)this._blocks[r]=0;for(r=this._start;s<a&&r<this._byteCount;++s)this._blocks[r>>2]|=n[s]<<t.SHIFT[3&r++];if(this._lastByteIndex=r,r>=this._byteCount){for(this._start=r-this._byteCount,this._block=this._blocks[this._blockCount],r=0;r<this._blockCount;++r)this._state[r]^=this._blocks[r];this.keccakPermutation(this._state),this._reset=!0}else this._start=r}}},{key:"digest",value:function(){this.finalize();var t,e=0,r=0,n=this._outputBits>>3;t=this._extraBytes?new ArrayBuffer(this._outputBlocks+1<<2):new ArrayBuffer(n);for(var o=new Uint32Array(t);r<this._outputBlocks;)for(e=0;e<this._blockCount&&r<this._outputBlocks;++e,++r)o[r]=this._state[e];return this._extraBytes&&(o[e]=this._state[e],t=t.slice(0,n)),this.reset(),t}},{key:"finalize",value:function(){var t=this._lastByteIndex;if(this._blocks[t>>2]|=this._padding[3&t],this._lastByteIndex===this._byteCount)for(this._blocks[0]=this._blocks[this._blockCount],t=1;t<this._blockCount+1;++t)this._blocks[t]=0;for(this._blocks[this._blockCount-1]|=2147483648,t=0;t<this._blockCount;++t)this._state[t]^=this._blocks[t];this.keccakPermutation(this._state)}},{key:"keccakPermutation",value:function(e){var r,n,o,i,a,s,u,c,f,l,h,y,p,v,m,b,_,d,g,T,w,E,H,S,L,N,x,A,k,O,I,P,G,j,M,C,R,B,F,D,U,W,Y,q,z,X,V,Z,K,J,$,Q,tt,et,rt,nt,ot,it,at,st,ut,ct,ft;for(o=0;o<48;o+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],a=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],u=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],f=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],h=e[7]^e[17]^e[27]^e[37]^e[47],r=(y=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|u>>>31),n=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(u<<1|s>>>31),e[0]^=r,e[1]^=n,e[10]^=r,e[11]^=n,e[20]^=r,e[21]^=n,e[30]^=r,e[31]^=n,e[40]^=r,e[41]^=n,r=i^(c<<1|f>>>31),n=a^(f<<1|c>>>31),e[2]^=r,e[3]^=n,e[12]^=r,e[13]^=n,e[22]^=r,e[23]^=n,e[32]^=r,e[33]^=n,e[42]^=r,e[43]^=n,r=s^(l<<1|h>>>31),n=u^(h<<1|l>>>31),e[4]^=r,e[5]^=n,e[14]^=r,e[15]^=n,e[24]^=r,e[25]^=n,e[34]^=r,e[35]^=n,e[44]^=r,e[45]^=n,r=c^(y<<1|p>>>31),n=f^(p<<1|y>>>31),e[6]^=r,e[7]^=n,e[16]^=r,e[17]^=n,e[26]^=r,e[27]^=n,e[36]^=r,e[37]^=n,e[46]^=r,e[47]^=n,r=l^(i<<1|a>>>31),n=h^(a<<1|i>>>31),e[8]^=r,e[9]^=n,e[18]^=r,e[19]^=n,e[28]^=r,e[29]^=n,e[38]^=r,e[39]^=n,e[48]^=r,e[49]^=n,v=e[0],m=e[1],X=e[11]<<4|e[10]>>>28,V=e[10]<<4|e[11]>>>28,A=e[20]<<3|e[21]>>>29,k=e[21]<<3|e[20]>>>29,st=e[31]<<9|e[30]>>>23,ut=e[30]<<9|e[31]>>>23,W=e[40]<<18|e[41]>>>14,Y=e[41]<<18|e[40]>>>14,j=e[2]<<1|e[3]>>>31,M=e[3]<<1|e[2]>>>31,b=e[13]<<12|e[12]>>>20,_=e[12]<<12|e[13]>>>20,Z=e[22]<<10|e[23]>>>22,K=e[23]<<10|e[22]>>>22,O=e[33]<<13|e[32]>>>19,I=e[32]<<13|e[33]>>>19,ct=e[42]<<2|e[43]>>>30,ft=e[43]<<2|e[42]>>>30,et=e[5]<<30|e[4]>>>2,rt=e[4]<<30|e[5]>>>2,C=e[14]<<6|e[15]>>>26,R=e[15]<<6|e[14]>>>26,d=e[25]<<11|e[24]>>>21,g=e[24]<<11|e[25]>>>21,J=e[34]<<15|e[35]>>>17,$=e[35]<<15|e[34]>>>17,P=e[45]<<29|e[44]>>>3,G=e[44]<<29|e[45]>>>3,S=e[6]<<28|e[7]>>>4,L=e[7]<<28|e[6]>>>4,nt=e[17]<<23|e[16]>>>9,ot=e[16]<<23|e[17]>>>9,B=e[26]<<25|e[27]>>>7,F=e[27]<<25|e[26]>>>7,T=e[36]<<21|e[37]>>>11,w=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,tt=e[46]<<24|e[47]>>>8,q=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,N=e[18]<<20|e[19]>>>12,x=e[19]<<20|e[18]>>>12,it=e[29]<<7|e[28]>>>25,at=e[28]<<7|e[29]>>>25,D=e[38]<<8|e[39]>>>24,U=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,H=e[49]<<14|e[48]>>>18,e[0]=v^~b&d,e[1]=m^~_&g,e[10]=S^~N&A,e[11]=L^~x&k,e[20]=j^~C&B,e[21]=M^~R&F,e[30]=q^~X&Z,e[31]=z^~V&K,e[40]=et^~nt&it,e[41]=rt^~ot&at,e[2]=b^~d&T,e[3]=_^~g&w,e[12]=N^~A&O,e[13]=x^~k&I,e[22]=C^~B&D,e[23]=R^~F&U,e[32]=X^~Z&J,e[33]=V^~K&$,e[42]=nt^~it&st,e[43]=ot^~at&ut,e[4]=d^~T&E,e[5]=g^~w&H,e[14]=A^~O&P,e[15]=k^~I&G,e[24]=B^~D&W,e[25]=F^~U&Y,e[34]=Z^~J&Q,e[35]=K^~$&tt,e[44]=it^~st&ct,e[45]=at^~ut&ft,e[6]=T^~E&v,e[7]=w^~H&m,e[16]=O^~P&S,e[17]=I^~G&L,e[26]=D^~W&j,e[27]=U^~Y&M,e[36]=J^~Q&q,e[37]=$^~tt&z,e[46]=st^~ct&et,e[47]=ut^~ft&rt,e[8]=E^~v&b,e[9]=H^~m&_,e[18]=P^~S&N,e[19]=G^~L&x,e[28]=W^~j&C,e[29]=Y^~M&R,e[38]=Q^~q&X,e[39]=tt^~z&V,e[48]=ct^~et&nt,e[49]=ft^~rt&ot,e[0]^=t.ROUND_CONSTANTS[o],e[1]^=t.ROUND_CONSTANTS[o+1]}}])&&n(e.prototype,r),a&&n(e,a),t}();a.KECCAK_PADDING=new Uint32Array([1,256,65536,16777216]),a.SHIFT=new Uint8Array([0,8,16,24]),a.ROUND_CONSTANTS=new Uint32Array([1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648]),e.Sha3=a},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(3),a=r(0),s=o(r(33)),u=r(1),c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,o;return e=t,o=[{key:"tritsToBigInteger",value:function(e,r,n){if(!a.ObjectHelper.isType(e,Int8Array)||0===e.length)throw new u.CryptoError("The trits must be a non empty Int8Array");if(!i.NumberHelper.isInteger(r)||r<0)throw new u.CryptoError("The offset must be a number >= 0");if(!i.NumberHelper.isInteger(n)||n<=0)throw new u.CryptoError("The length must be a number > 0");if(r+n>e.length)throw new u.CryptoError("The offset + length is beyond the length of the array");for(var o=s.default.zero,c=n-1;c>=0;c--)o=o.multiply(t.RADIX).add(s.default(e[r+c]));return o}},{key:"bigIntegerToTrits",value:function(e,r,n,o){if(!a.ObjectHelper.isType(e,s.default))throw new u.CryptoError("The value must be a bigInteger type");if(!a.ObjectHelper.isType(r,Int8Array))throw new u.CryptoError("The trits must be an Int8Array");if(!i.NumberHelper.isInteger(n)||n<0)throw new u.CryptoError("The offset must be a number >= 0");if(!i.NumberHelper.isInteger(o)||o<=0)throw new u.CryptoError("The length must be a number > 0");if(n+o>r.length)throw new u.CryptoError("The offset + length is beyond the length of the array");for(var c=e.compareTo(s.default.zero)<0?e.negate():e,f=0;f<o;f++){var l=c.divmod(t.RADIX);c=l.quotient;var h=l.remainder;h>t.MAX_TRIT_VALUE&&(h=t.MIN_TRIT_VALUE,c=c.add(s.default[1])),r[n+f]=h.toJSNumber()}if(e.compareTo(s.default.zero)<0)for(var y=0;y<o;y++)r[n+y]=0===r[n+y]?0:-r[n+y]}},{key:"bigIntegerToBytes",value:function(e,r,n){if(!a.ObjectHelper.isType(e,s.default))throw new u.CryptoError("The value must be a bigInteger type");if(!a.ObjectHelper.isType(r,ArrayBuffer)||0===r.byteLength)throw new u.CryptoError("The destination must be an array");if(!i.NumberHelper.isInteger(n)||n<0)throw new u.CryptoError("The offset must be a number >= 0");if(r.byteLength-n<t.BYTE_HASH_LENGTH)throw new u.CryptoError("Destination array has invalid size, it must be at least ".concat(t.BYTE_HASH_LENGTH));var o=e.isNegative()?-1:0,c=e.toString(16);-1===o&&(c=c.slice(1)),c.length%2==1&&(c="0".concat(c));var f=c.match(/[0-9a-f]{2}/g),l=new Int8Array(f.map(function(t){return parseInt("0x".concat(t),16)}));-1===o&&t.twosComplement(l);for(var h=new DataView(r),y=n;y+l.length<t.BYTE_HASH_LENGTH;)h.setInt8(y++,o);for(var p=l.length;p-- >0;)h.setInt8(y++,l[l.length-1-p])}},{key:"bytesToBigInteger",value:function(e,r,n){if(!a.ObjectHelper.isType(e,ArrayBuffer)||0===e.byteLength)throw new u.CryptoError("The source must be a non empty number array");if(!i.NumberHelper.isInteger(r)||r<0)throw new u.CryptoError("The offset must be a number >= 0");if(!i.NumberHelper.isInteger(n)||n<=0)throw new u.CryptoError("The length must be a number > 0");if(e.byteLength-r<t.BYTE_HASH_LENGTH)throw new u.CryptoError("Source array has invalid size, it must be at least ".concat(t.BYTE_HASH_LENGTH));for(var o=new DataView(e),c=new Int8Array(o.byteLength),f=0;f<o.byteLength;f++)c[f]=o.getInt8(f+r);var l=0,h=c[0],y=h<0;if(0===h||-1===h){for(;c[l]===h&&l<c.length-1;)l++;c=c.slice(l)}y&&t.twosComplement(c);for(var p=y?"-":"",v=new DataView(c.buffer),m=0;m<v.byteLength;m++)p+="00".concat(v.getUint8(m).toString(16)).slice(-2);return s.default(p,16)}},{key:"twosComplement",value:function(t){for(var e=0;e<t.length;e++)t[e]=~t[e];var r=t.length-1;do{t[r]++}while(0===t[r--]&&r>0)}}],(r=null)&&n(e.prototype,r),o&&n(e,o),t}();c.RADIX=s.default(3),c.MAX_TRIT_VALUE=c.RADIX.minus(1).divide(2),c.MIN_TRIT_VALUE=c.MAX_TRIT_VALUE.negate(),c.BIT_HASH_LENGTH=384,c.BYTE_HASH_LENGTH=c.BIT_HASH_LENGTH/8,e.BigIntegerHelper=c},function(t,e,r){(function(t){var r,n=function(t){"use strict";var e=1e7,r=7,o=9007199254740992,i=l(o),a=Math.log(o);function s(t,e){return void 0===t?s[0]:void 0!==e?10==+e?z(t):D(t,e):z(t)}function u(t,e){this.value=t,this.sign=e,this.isSmall=!1}function c(t){this.value=t,this.sign=t<0,this.isSmall=!0}function f(t){return-o<t&&t<o}function l(t){return t<1e7?[t]:t<1e14?[t%1e7,Math.floor(t/1e7)]:[t%1e7,Math.floor(t/1e7)%1e7,Math.floor(t/1e14)]}function h(t){y(t);var r=t.length;if(r<4&&x(t,i)<0)switch(r){case 0:return 0;case 1:return t[0];case 2:return t[0]+t[1]*e;default:return t[0]+(t[1]+t[2]*e)*e}return t}function y(t){for(var e=t.length;0===t[--e];);t.length=e+1}function p(t){for(var e=new Array(t),r=-1;++r<t;)e[r]=0;return e}function v(t){return t>0?Math.floor(t):Math.ceil(t)}function m(t,r){var n,o,i=t.length,a=r.length,s=new Array(i),u=0,c=e;for(o=0;o<a;o++)u=(n=t[o]+r[o]+u)>=c?1:0,s[o]=n-u*c;for(;o<i;)u=(n=t[o]+u)===c?1:0,s[o++]=n-u*c;return u>0&&s.push(u),s}function b(t,e){return t.length>=e.length?m(t,e):m(e,t)}function _(t,r){var n,o,i=t.length,a=new Array(i),s=e;for(o=0;o<i;o++)n=t[o]-s+r,r=Math.floor(n/s),a[o]=n-r*s,r+=1;for(;r>0;)a[o++]=r%s,r=Math.floor(r/s);return a}function d(t,r){var n,o,i=t.length,a=r.length,s=new Array(i),u=0,c=e;for(n=0;n<a;n++)(o=t[n]-u-r[n])<0?(o+=c,u=1):u=0,s[n]=o;for(n=a;n<i;n++){if(!((o=t[n]-u)<0)){s[n++]=o;break}o+=c,s[n]=o}for(;n<i;n++)s[n]=t[n];return y(s),s}function g(t,r,n){var o,i,a=t.length,s=new Array(a),f=-r,l=e;for(o=0;o<a;o++)i=t[o]+f,f=Math.floor(i/l),i%=l,s[o]=i<0?i+l:i;return"number"==typeof(s=h(s))?(n&&(s=-s),new c(s)):new u(s,n)}function T(t,r){var n,o,i,a,s=t.length,u=r.length,c=p(s+u),f=e;for(i=0;i<s;++i){a=t[i];for(var l=0;l<u;++l)n=a*r[l]+c[i+l],o=Math.floor(n/f),c[i+l]=n-o*f,c[i+l+1]+=o}return y(c),c}function w(t,r){var n,o,i=t.length,a=new Array(i),s=e,u=0;for(o=0;o<i;o++)n=t[o]*r+u,u=Math.floor(n/s),a[o]=n-u*s;for(;u>0;)a[o++]=u%s,u=Math.floor(u/s);return a}function E(t,e){for(var r=[];e-- >0;)r.push(0);return r.concat(t)}function H(t,r,n){return new u(t<e?w(r,t):T(r,l(t)),n)}function S(t){var r,n,o,i,a=t.length,s=p(a+a),u=e;for(o=0;o<a;o++){i=t[o];for(var c=0;c<a;c++)r=i*t[c]+s[o+c],n=Math.floor(r/u),s[o+c]=r-n*u,s[o+c+1]+=n}return y(s),s}function L(t,r){var n,o,i,a,s=t.length,u=p(s),c=e;for(i=0,n=s-1;n>=0;--n)i=(a=i*c+t[n])-(o=v(a/r))*r,u[n]=0|o;return[u,0|i]}function N(t,r){var n,o,i=z(r),a=t.value,f=i.value;if(0===f)throw new Error("Cannot divide by zero");if(t.isSmall)return i.isSmall?[new c(v(a/f)),new c(a%f)]:[s[0],t];if(i.isSmall){if(1===f)return[t,s[0]];if(-1==f)return[t.negate(),s[0]];var m=Math.abs(f);if(m<e){o=h((n=L(a,m))[0]);var b=n[1];return t.sign&&(b=-b),"number"==typeof o?(t.sign!==i.sign&&(o=-o),[new c(o),new c(b)]):[new u(o,t.sign!==i.sign),new c(b)]}f=l(m)}var _=x(a,f);if(-1===_)return[s[0],t];if(0===_)return[s[t.sign===i.sign?1:-1],s[0]];o=(n=a.length+f.length<=200?function(t,r){var n,o,i,a,s,u,c,f=t.length,l=r.length,y=e,v=p(r.length),m=r[l-1],b=Math.ceil(y/(2*m)),_=w(t,b),d=w(r,b);for(_.length<=f&&_.push(0),d.push(0),m=d[l-1],o=f-l;o>=0;o--){for(n=y-1,_[o+l]!==m&&(n=Math.floor((_[o+l]*y+_[o+l-1])/m)),i=0,a=0,u=d.length,s=0;s<u;s++)i+=n*d[s],c=Math.floor(i/y),a+=_[o+s]-(i-c*y),i=c,a<0?(_[o+s]=a+y,a=-1):(_[o+s]=a,a=0);for(;0!==a;){for(n-=1,i=0,s=0;s<u;s++)(i+=_[o+s]-y+d[s])<0?(_[o+s]=i+y,i=0):(_[o+s]=i,i=1);a+=i}v[o]=n}return _=L(_,b)[0],[h(v),h(_)]}(a,f):function(t,r){for(var n,o,i,a,s,u=t.length,c=r.length,f=[],l=[],p=e;u;)if(l.unshift(t[--u]),y(l),x(l,r)<0)f.push(0);else{i=l[(o=l.length)-1]*p+l[o-2],a=r[c-1]*p+r[c-2],o>c&&(i=(i+1)*p),n=Math.ceil(i/a);do{if(x(s=w(r,n),l)<=0)break;n--}while(n);f.push(n),l=d(l,s)}return f.reverse(),[h(f),h(l)]}(a,f))[0];var g=t.sign!==i.sign,T=n[1],E=t.sign;return"number"==typeof o?(g&&(o=-o),o=new c(o)):o=new u(o,g),"number"==typeof T?(E&&(T=-T),T=new c(T)):T=new u(T,E),[o,T]}function x(t,e){if(t.length!==e.length)return t.length>e.length?1:-1;for(var r=t.length-1;r>=0;r--)if(t[r]!==e[r])return t[r]>e[r]?1:-1;return 0}function A(t){var e=t.abs();return!e.isUnit()&&(!!(e.equals(2)||e.equals(3)||e.equals(5))||!(e.isEven()||e.isDivisibleBy(3)||e.isDivisibleBy(5))&&(!!e.lesser(25)||void 0))}u.prototype=Object.create(s.prototype),c.prototype=Object.create(s.prototype),u.prototype.add=function(t){var e=z(t);if(this.sign!==e.sign)return this.subtract(e.negate());var r=this.value,n=e.value;return e.isSmall?new u(_(r,Math.abs(n)),this.sign):new u(b(r,n),this.sign)},u.prototype.plus=u.prototype.add,c.prototype.add=function(t){var e=z(t),r=this.value;if(r<0!==e.sign)return this.subtract(e.negate());var n=e.value;if(e.isSmall){if(f(r+n))return new c(r+n);n=l(Math.abs(n))}return new u(_(n,Math.abs(r)),r<0)},c.prototype.plus=c.prototype.add,u.prototype.subtract=function(t){var e=z(t);if(this.sign!==e.sign)return this.add(e.negate());var r=this.value,n=e.value;return e.isSmall?g(r,Math.abs(n),this.sign):function(t,e,r){var n;return x(t,e)>=0?n=d(t,e):(n=d(e,t),r=!r),"number"==typeof(n=h(n))?(r&&(n=-n),new c(n)):new u(n,r)}(r,n,this.sign)},u.prototype.minus=u.prototype.subtract,c.prototype.subtract=function(t){var e=z(t),r=this.value;if(r<0!==e.sign)return this.add(e.negate());var n=e.value;return e.isSmall?new c(r-n):g(n,Math.abs(r),r>=0)},c.prototype.minus=c.prototype.subtract,u.prototype.negate=function(){return new u(this.value,!this.sign)},c.prototype.negate=function(){var t=this.sign,e=new c(-this.value);return e.sign=!t,e},u.prototype.abs=function(){return new u(this.value,!1)},c.prototype.abs=function(){return new c(Math.abs(this.value))},u.prototype.multiply=function(t){var r,n,o,i=z(t),a=this.value,c=i.value,f=this.sign!==i.sign;if(i.isSmall){if(0===c)return s[0];if(1===c)return this;if(-1===c)return this.negate();if((r=Math.abs(c))<e)return new u(w(a,r),f);c=l(r)}return n=a.length,o=c.length,new u(-.012*n-.012*o+15e-6*n*o>0?function t(e,r){var n=Math.max(e.length,r.length);if(n<=30)return T(e,r);n=Math.ceil(n/2);var o=e.slice(n),i=e.slice(0,n),a=r.slice(n),s=r.slice(0,n),u=t(i,s),c=t(o,a),f=b(b(u,E(d(d(t(b(i,o),b(s,a)),u),c),n)),E(c,2*n));return y(f),f}(a,c):T(a,c),f)},u.prototype.times=u.prototype.multiply,c.prototype._multiplyBySmall=function(t){return f(t.value*this.value)?new c(t.value*this.value):H(Math.abs(t.value),l(Math.abs(this.value)),this.sign!==t.sign)},u.prototype._multiplyBySmall=function(t){return 0===t.value?s[0]:1===t.value?this:-1===t.value?this.negate():H(Math.abs(t.value),this.value,this.sign!==t.sign)},c.prototype.multiply=function(t){return z(t)._multiplyBySmall(this)},c.prototype.times=c.prototype.multiply,u.prototype.square=function(){return new u(S(this.value),!1)},c.prototype.square=function(){var t=this.value*this.value;return f(t)?new c(t):new u(S(l(Math.abs(this.value))),!1)},u.prototype.divmod=function(t){var e=N(this,t);return{quotient:e[0],remainder:e[1]}},c.prototype.divmod=u.prototype.divmod,u.prototype.divide=function(t){return N(this,t)[0]},c.prototype.over=c.prototype.divide=u.prototype.over=u.prototype.divide,u.prototype.mod=function(t){return N(this,t)[1]},c.prototype.remainder=c.prototype.mod=u.prototype.remainder=u.prototype.mod,u.prototype.pow=function(t){var e,r,n,o=z(t),i=this.value,a=o.value;if(0===a)return s[1];if(0===i)return s[0];if(1===i)return s[1];if(-1===i)return o.isEven()?s[1]:s[-1];if(o.sign)return s[0];if(!o.isSmall)throw new Error("The exponent "+o.toString()+" is too large.");if(this.isSmall&&f(e=Math.pow(i,a)))return new c(v(e));for(r=this,n=s[1];!0&a&&(n=n.times(r),--a),0!==a;)a/=2,r=r.square();return n},c.prototype.pow=u.prototype.pow,u.prototype.modPow=function(t,e){if(t=z(t),(e=z(e)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var r=s[1],n=this.mod(e);t.isPositive();){if(n.isZero())return s[0];t.isOdd()&&(r=r.multiply(n).mod(e)),t=t.divide(2),n=n.square().mod(e)}return r},c.prototype.modPow=u.prototype.modPow,u.prototype.compareAbs=function(t){var e=z(t),r=this.value,n=e.value;return e.isSmall?1:x(r,n)},c.prototype.compareAbs=function(t){var e=z(t),r=Math.abs(this.value),n=e.value;return e.isSmall?r===(n=Math.abs(n))?0:r>n?1:-1:-1},u.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=z(t),r=this.value,n=e.value;return this.sign!==e.sign?e.sign?1:-1:e.isSmall?this.sign?-1:1:x(r,n)*(this.sign?-1:1)},u.prototype.compareTo=u.prototype.compare,c.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=z(t),r=this.value,n=e.value;return e.isSmall?r==n?0:r>n?1:-1:r<0!==e.sign?r<0?-1:1:r<0?1:-1},c.prototype.compareTo=c.prototype.compare,u.prototype.equals=function(t){return 0===this.compare(t)},c.prototype.eq=c.prototype.equals=u.prototype.eq=u.prototype.equals,u.prototype.notEquals=function(t){return 0!==this.compare(t)},c.prototype.neq=c.prototype.notEquals=u.prototype.neq=u.prototype.notEquals,u.prototype.greater=function(t){return this.compare(t)>0},c.prototype.gt=c.prototype.greater=u.prototype.gt=u.prototype.greater,u.prototype.lesser=function(t){return this.compare(t)<0},c.prototype.lt=c.prototype.lesser=u.prototype.lt=u.prototype.lesser,u.prototype.greaterOrEquals=function(t){return this.compare(t)>=0},c.prototype.geq=c.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals,u.prototype.lesserOrEquals=function(t){return this.compare(t)<=0},c.prototype.leq=c.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals,u.prototype.isEven=function(){return 0==(1&this.value[0])},c.prototype.isEven=function(){return 0==(1&this.value)},u.prototype.isOdd=function(){return 1==(1&this.value[0])},c.prototype.isOdd=function(){return 1==(1&this.value)},u.prototype.isPositive=function(){return!this.sign},c.prototype.isPositive=function(){return this.value>0},u.prototype.isNegative=function(){return this.sign},c.prototype.isNegative=function(){return this.value<0},u.prototype.isUnit=function(){return!1},c.prototype.isUnit=function(){return 1===Math.abs(this.value)},u.prototype.isZero=function(){return!1},c.prototype.isZero=function(){return 0===this.value},u.prototype.isDivisibleBy=function(t){var e=z(t),r=e.value;return 0!==r&&(1===r||(2===r?this.isEven():this.mod(e).equals(s[0])))},c.prototype.isDivisibleBy=u.prototype.isDivisibleBy,u.prototype.isPrime=function(){var t=A(this);if(void 0!==t)return t;for(var e,r,o,i,a=this.abs(),u=a.prev(),c=[2,3,5,7,11,13,17,19],f=u;f.isEven();)f=f.divide(2);for(o=0;o<c.length;o++)if(!(i=n(c[o]).modPow(f,a)).equals(s[1])&&!i.equals(u)){for(r=!0,e=f;r&&e.lesser(u);e=e.multiply(2))(i=i.square().mod(a)).equals(u)&&(r=!1);if(r)return!1}return!0},c.prototype.isPrime=u.prototype.isPrime,u.prototype.isProbablePrime=function(t){var e=A(this);if(void 0!==e)return e;for(var r=this.abs(),o=void 0===t?5:t,i=0;i<o;i++){if(!n.randBetween(2,r.minus(2)).modPow(r.prev(),r).isUnit())return!1}return!0},c.prototype.isProbablePrime=u.prototype.isProbablePrime,u.prototype.modInv=function(t){for(var e,r,o,i=n.zero,a=n.one,s=z(t),u=this.abs();!u.equals(n.zero);)e=s.divide(u),r=i,o=s,i=a,s=u,a=r.subtract(e.multiply(a)),u=o.subtract(e.multiply(u));if(!s.equals(1))throw new Error(this.toString()+" and "+t.toString()+" are not co-prime");return-1===i.compare(0)&&(i=i.add(t)),this.isNegative()?i.negate():i},c.prototype.modInv=u.prototype.modInv,u.prototype.next=function(){var t=this.value;return this.sign?g(t,1,this.sign):new u(_(t,1),this.sign)},c.prototype.next=function(){var t=this.value;return t+1<o?new c(t+1):new u(i,!1)},u.prototype.prev=function(){var t=this.value;return this.sign?new u(_(t,1),!0):g(t,1,this.sign)},c.prototype.prev=function(){var t=this.value;return t-1>-o?new c(t-1):new u(i,!0)};for(var k=[1];2*k[k.length-1]<=e;)k.push(2*k[k.length-1]);var O=k.length,I=k[O-1];function P(t){return("number"==typeof t||"string"==typeof t)&&+Math.abs(t)<=e||t instanceof u&&t.value.length<=1}function G(t,e,r){e=z(e);for(var o=t.isNegative(),i=e.isNegative(),a=o?t.not():t,s=i?e.not():e,u=0,c=0,f=null,l=null,h=[];!a.isZero()||!s.isZero();)u=(f=N(a,I))[1].toJSNumber(),o&&(u=I-1-u),c=(l=N(s,I))[1].toJSNumber(),i&&(c=I-1-c),a=f[0],s=l[0],h.push(r(u,c));for(var y=0!==r(o?1:0,i?1:0)?n(-1):n(0),p=h.length-1;p>=0;p-=1)y=y.multiply(I).add(n(h[p]));return y}u.prototype.shiftLeft=function(t){if(!P(t))throw new Error(String(t)+" is too large for shifting.");if((t=+t)<0)return this.shiftRight(-t);for(var e=this;t>=O;)e=e.multiply(I),t-=O-1;return e.multiply(k[t])},c.prototype.shiftLeft=u.prototype.shiftLeft,u.prototype.shiftRight=function(t){var e;if(!P(t))throw new Error(String(t)+" is too large for shifting.");if((t=+t)<0)return this.shiftLeft(-t);for(var r=this;t>=O;){if(r.isZero())return r;r=(e=N(r,I))[1].isNegative()?e[0].prev():e[0],t-=O-1}return(e=N(r,k[t]))[1].isNegative()?e[0].prev():e[0]},c.prototype.shiftRight=u.prototype.shiftRight,u.prototype.not=function(){return this.negate().prev()},c.prototype.not=u.prototype.not,u.prototype.and=function(t){return G(this,t,function(t,e){return t&e})},c.prototype.and=u.prototype.and,u.prototype.or=function(t){return G(this,t,function(t,e){return t|e})},c.prototype.or=u.prototype.or,u.prototype.xor=function(t){return G(this,t,function(t,e){return t^e})},c.prototype.xor=u.prototype.xor;var j=1<<30,M=(e&-e)*(e&-e)|j;function C(t){var r=t.value,n="number"==typeof r?r|j:r[0]+r[1]*e|M;return n&-n}function R(t,e){return t=z(t),e=z(e),t.greater(e)?t:e}function B(t,e){return t=z(t),e=z(e),t.lesser(e)?t:e}function F(t,e){if(t=z(t).abs(),e=z(e).abs(),t.equals(e))return t;if(t.isZero())return e;if(e.isZero())return t;for(var r,n,o=s[1];t.isEven()&&e.isEven();)r=Math.min(C(t),C(e)),t=t.divide(r),e=e.divide(r),o=o.multiply(r);for(;t.isEven();)t=t.divide(C(t));do{for(;e.isEven();)e=e.divide(C(e));t.greater(e)&&(n=e,e=t,t=n),e=e.subtract(t)}while(!e.isZero());return o.isUnit()?t:t.multiply(o)}var D=function(t,e){for(var r=t.length,n=Math.abs(e),o=0;o<r;o++){if("-"!==(f=t[o].toLowerCase())&&/[a-z0-9]/.test(f)){if(/[0-9]/.test(f)&&+f>=n){if("1"===f&&1===n)continue;throw new Error(f+" is not a valid digit in base "+e+".")}if(f.charCodeAt(0)-87>=n)throw new Error(f+" is not a valid digit in base "+e+".")}}if(2<=e&&e<=36&&r<=a/Math.log(e)){var i=parseInt(t,e);if(isNaN(i))throw new Error(f+" is not a valid digit in base "+e+".");return new c(parseInt(t,e))}e=z(e);var s=[],u="-"===t[0];for(o=u?1:0;o<t.length;o++){var f,l=(f=t[o].toLowerCase()).charCodeAt(0);if(48<=l&&l<=57)s.push(z(f));else if(97<=l&&l<=122)s.push(z(f.charCodeAt(0)-87));else{if("<"!==f)throw new Error(f+" is not a valid character");var h=o;do{o++}while(">"!==t[o]);s.push(z(t.slice(h+1,o)))}}return U(s,e,u)};function U(t,e,r){var n,o=s[0],i=s[1];for(n=t.length-1;n>=0;n--)o=o.add(t[n].times(i)),i=i.times(e);return r?o.negate():o}function W(t){var e=t.value;return"number"==typeof e&&(e=[e]),1===e.length&&e[0]<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e[0]):"<"+e+">"}function Y(t,e){if((e=n(e)).isZero()){if(t.isZero())return"0";throw new Error("Cannot convert nonzero numbers to base 0.")}if(e.equals(-1))return t.isZero()?"0":t.isNegative()?new Array(1-t).join("10"):"1"+new Array(+t).join("01");var r="";if(t.isNegative()&&e.isPositive()&&(r="-",t=t.abs()),e.equals(1))return t.isZero()?"0":r+new Array(+t+1).join(1);for(var o,i=[],a=t;a.isNegative()||a.compareAbs(e)>=0;){a=(o=a.divmod(e)).quotient;var s=o.remainder;s.isNegative()&&(s=e.minus(s).abs(),a=a.next()),i.push(W(s))}return i.push(W(a)),r+i.reverse().join("")}function q(t){if(f(+t)){var e=+t;if(e===v(e))return new c(e);throw"Invalid integer: "+t}var n="-"===t[0];n&&(t=t.slice(1));var o=t.split(/e/i);if(o.length>2)throw new Error("Invalid integer: "+o.join("e"));if(2===o.length){var i=o[1];if("+"===i[0]&&(i=i.slice(1)),(i=+i)!==v(i)||!f(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");var a=o[0],s=a.indexOf(".");if(s>=0&&(i-=a.length-s-1,a=a.slice(0,s)+a.slice(s+1)),i<0)throw new Error("Cannot include negative exponent part for integers");t=a+=new Array(i+1).join("0")}if(!/^([0-9][0-9]*)$/.test(t))throw new Error("Invalid integer: "+t);for(var l=[],h=t.length,p=r,m=h-p;h>0;)l.push(+t.slice(m,h)),(m-=p)<0&&(m=0),h-=p;return y(l),new u(l,n)}function z(t){return"number"==typeof t?function(t){if(f(t)){if(t!==v(t))throw new Error(t+" is not an integer.");return new c(t)}return q(t.toString())}(t):"string"==typeof t?q(t):t}u.prototype.toString=function(t){if(void 0===t&&(t=10),10!==t)return Y(this,t);for(var e,r=this.value,n=r.length,o=String(r[--n]);--n>=0;)e=String(r[n]),o+="0000000".slice(e.length)+e;return(this.sign?"-":"")+o},c.prototype.toString=function(t){return void 0===t&&(t=10),10!=t?Y(this,t):String(this.value)},u.prototype.toJSON=c.prototype.toJSON=function(){return this.toString()},u.prototype.valueOf=function(){return+this.toString()},u.prototype.toJSNumber=u.prototype.valueOf,c.prototype.valueOf=function(){return this.value},c.prototype.toJSNumber=c.prototype.valueOf;for(var X=0;X<1e3;X++)s[X]=new c(X),X>0&&(s[-X]=new c(-X));return s.one=s[1],s.zero=s[0],s.minusOne=s[-1],s.max=R,s.min=B,s.gcd=F,s.lcm=function(t,e){return t=z(t).abs(),e=z(e).abs(),t.divide(F(t,e)).multiply(e)},s.isInstance=function(t){return t instanceof u||t instanceof c},s.randBetween=function(t,r){var n=B(t=z(t),r=z(r)),o=R(t,r).subtract(n).add(1);if(o.isSmall)return n.add(Math.floor(Math.random()*o));for(var i=[],a=!0,s=o.value.length-1;s>=0;s--){var f=a?o.value[s]:e,l=v(Math.random()*f);i.unshift(l),l<f&&(a=!1)}return i=h(i),n.add("number"==typeof i?new c(i):new u(i,!1))},s.fromArray=function(t,e,r){return U(t.map(z),z(e||10),r)},s}();void 0!==t&&t.hasOwnProperty("exports")&&(t.exports=n),void 0===(r=function(){return n}.apply(e,[]))||(t.exports=r)}).call(e,r(34)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";var n,o=(n=r(7))&&n.__esModule?n:{default:n};function i(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t,e){try{var r=i[t](e),a=r.value}catch(t){return void o(t)}r.done?n(a):Promise.resolve(a).then(s,u)}function s(t){a("next",t)}function u(t){a("throw",t)}s()})}}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=r(0),c=r(14),f=r(6),l=s(r(36)),h=s(r(37)),y=s(r(38)),p=s(r(39)),v=s(r(40)),m=s(r(41)),b=s(r(42)),_=s(r(43)),d=s(r(44)),g=r(45),T=r(49),w=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._webGLWorker=new g.WebGLWorker;var r=c.SpongeFactory.instance().create("curl");this._hashLength=r.getConstant("HASH_LENGTH"),this._stateLength=r.getConstant("STATE_LENGTH"),this._numberRounds=r.getConstant("NUMBER_OF_ROUNDS"),this._transactionLength=33*this._hashLength,this._nonceLength=this._hashLength/3,this._nonceStart=this._hashLength-this._nonceLength,this._webGLWorker.initialize(e,this._stateLength+1,t.TEXEL_SIZE),this._currentBuffer=this._webGLWorker.getIpt().data,this._webGLWorker.addProgram("init",m.default+l.default+_.default,"gr_offset"),this._webGLWorker.addProgram("increment",m.default+l.default+b.default),this._webGLWorker.addProgram("twist",m.default+d.default),this._webGLWorker.addProgram("check",m.default+y.default+p.default,"minWeightMagnitude"),this._webGLWorker.addProgram("col_check",m.default+h.default),this._webGLWorker.addProgram("finalize",m.default+y.default+v.default),this._state=T.PearlDiverState.ready,this._queue=[]}var e,r,n,s,w;return e=t,r=[{key:"searchWithTrytes",value:(w=i(o.default.mark(function t(e,r){var n;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.prepare(e),t.abrupt("return",this.search(n,r));case 2:case"end":return t.stop()}},t,this)})),function(t,e){return w.apply(this,arguments)})},{key:"prepare",value:function(t){var e=c.SpongeFactory.instance().create("curl");e.initialize();var r=f.Trits.fromTrytes(t).toArray();e.absorb(r,0,this._transactionLength-this._hashLength);var n=e.getState();return r.slice(this._transactionLength-this._hashLength,this._transactionLength).forEach(function(t,e){n[e]=t}),this.searchToPair(n)}},{key:"search",value:(s=i(o.default.mark(function t(e,r){var n=this;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,o){n._queue.push({states:e,minWeightMagnitude:r,callback:t}),n._state===T.PearlDiverState.ready&&n.searchDoNext()}));case 1:case"end":return t.stop()}},t,this)})),function(t,e){return s.apply(this,arguments)})},{key:"searchToPair",value:function(e){var r={low:new Int32Array(this._stateLength),high:new Int32Array(this._stateLength)};return e.forEach(function(e,n){switch(e){case 0:r.low[n]=t.HIGH_BITS,r.high[n]=t.HIGH_BITS;break;case 1:r.low[n]=t.LOW_BITS,r.high[n]=t.HIGH_BITS;break;default:r.low[n]=t.HIGH_BITS,r.high[n]=t.LOW_BITS}}),this.searchOffset(r,this._nonceStart),r}},{key:"searchOffset",value:function(e,r){e.low[r+0]=t.LOW_0,e.low[r+1]=t.LOW_1,e.low[r+2]=t.LOW_2,e.low[r+3]=t.LOW_3,e.high[r+0]=t.HIGH_0,e.high[r+1]=t.HIGH_1,e.high[r+2]=t.HIGH_2,e.high[r+3]=t.HIGH_3}},{key:"searchDoNext",value:function(){var t=this._queue.shift();u.ObjectHelper.isEmpty(t)?this._state=T.PearlDiverState.ready:(this._state=T.PearlDiverState.searching,this.webGLFindNonce(t))}},{key:"webGLFindNonce",value:function(t){var e=this;this.webGLWriteBuffers(t.states),this._webGLWorker.writeData(this._currentBuffer),this._webGLWorker.runProgram("init",1,{name:"gr_offset",value:0}),setTimeout(function(){return e.webGLSearch(t)},1)}},{key:"webGLWriteBuffers",value:function(e){for(var r=0;r<this._stateLength;r++)this._currentBuffer[r*t.TEXEL_SIZE]=e.low[r],this._currentBuffer[r*t.TEXEL_SIZE+1]=e.high[r],this._currentBuffer[r*t.TEXEL_SIZE+2]=e.low[r],this._currentBuffer[r*t.TEXEL_SIZE+3]=e.high[r]}},{key:"webGLSearch",value:function(t){var e=this;if(this._webGLWorker.runProgram("increment",1),this._webGLWorker.runProgram("twist",this._numberRounds),this._webGLWorker.runProgram("check",1,{name:"minWeightMagnitude",value:t.minWeightMagnitude}),this._webGLWorker.runProgram("col_check",1),-1===this._webGLWorker.readData(this._stateLength,0,1,1)[2])setTimeout(function(){return e.webGLSearch(t)},10);else{this._webGLWorker.runProgram("finalize",1);var r=this._webGLWorker.readData(0,0,this._webGLWorker.getDimensions().x,1).reduce(this.pack(4),[]).slice(0,this._hashLength).map(function(t){return t[3]});t.callback(f.Trits.fromNumberArray(r).toTrytes()),this.searchDoNext()}}},{key:"pack",value:function(t){return function(e,r,n){return(n%t==0?e.push([r]):e[e.length-1].push(r))&&e}}}],n=[{key:"initialize",value:function(e){t.instance||(t.instance=new t(e))}},{key:"closedown",value:function(){t.instance&&(t.instance=void 0)}}],r&&a(e.prototype,r),n&&a(e,n),t}();w.TEXEL_SIZE=4,w.LOW_BITS=0,w.HIGH_BITS=-1,w.LOW_0=3681400539,w.LOW_1=4059626622,w.LOW_2=2147475471,w.LOW_3=4290772992,w.HIGH_0=3067833782,w.HIGH_1=2412241905,w.HIGH_2=4290781183,w.HIGH_3=4194303,e.PearlDiver=w},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nint sum (int a, int b) {\n  int my_sum = a + b;\n  return my_sum == 2 ? -1 : (my_sum == -2) ? 1 : my_sum;\n}\nint cons (int a, int b) {\n  return (a == 1 && b == 1)? 1 : (a == -1 && b == -1) ? -1 : 0;\n}\nint any_t (int a, int b) {\n  int my_any = a + b;\n  return my_any == 0 ? 0 : (my_any > 0) ? 1 : -1;\n}\nivec2 full_adder(int a, int b, int c) {\n  int c_a, c_b, sum_ab, c_s;\n\n  c_a    = cons(a,b);\n  sum_ab = sum(a,b);\n  c_b    = cons(sum_ab,c);\n  c_s    = any_t(c_a, c_b);\n\n  return ivec2(sum(sum_ab, c), c_s);\n}\nivec2 get_sum_to_index(int from, int to, int number_to_add, int row) {\n  int trit_to_add, trit_at_index, pow, carry, num_carry;\n  ivec2 read_in, sum_out, out_trit;\n  pow = 1;\n  carry = 0;\n  num_carry = 0;\n\n  for(int i = from; i < to; i++) {\n    //if(trit_to_add == 0 && sum_out.t == 0) continue;\n\n    read_in = read_at ( ivec2 (i, row)).rg;\n\n    trit_to_add = ((number_to_add / pow) % 3) + num_carry;\n    num_carry = trit_to_add > 1 ? 1 : 0;\n    trit_to_add = (trit_to_add == 2 ? -1 : (trit_to_add == 3 ? 0 : trit_to_add));\n\n    sum_out = full_adder(\n      (read_in.s == LOW_BITS ? 1 : read_in.t == LOW_BITS? -1 : 0),\n      trit_to_add,\n      carry\n    );\n\n    if(my_coord.x == i) break;\n    carry = sum_out.t;\n    pow *=3;\n  }\n  if(sum_out.s == 0) {\n    return ivec2(HIGH_BITS);\n  } else if (sum_out.s == 1) {\n    return ivec2(LOW_BITS, HIGH_BITS);\n  } else {\n    return ivec2(HIGH_BITS, LOW_BITS);\n  }\n}\n"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nvoid main() {\n  init();\n  ivec4 my_vec = read();\n  int i;\n  if(my_coord.x == STATE_LENGTH && my_coord.y == 0) {\n    my_vec.b = 0;\n    if(my_vec.a == 0) {\n      ivec4 read_vec;\n      my_vec.b = -1;\n      for(i = 1; i < int(size.y); i++) {\n        read_vec = read_at( ivec2( STATE_LENGTH, i));\n        if(read_vec.a != 0) {\n          my_vec.a = read_vec.a;\n          my_vec.b = i;\n          break;\n        }\n      }\n    }\n  }\n  commit(my_vec);\n}\n"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nint check(int row, int min_weight_magnitude) {\n  int nonce_probe, i;\n  ivec2 r_texel;\n  nonce_probe = HIGH_BITS;\n  for(i = min_weight_magnitude; i-- > 0; ) {\n    r_texel = read_at(ivec2(HASH_LENGTH - 1 - i, row)).ba;\n    nonce_probe &= ~(r_texel.s ^ r_texel.t);\n    if(nonce_probe == 0) break;\n  }\n  return nonce_probe;\n}\n"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nuniform int minWeightMagnitude;\nvoid main() {\n  init();\n  ivec4 my_vec = read();\n  if(my_coord.x == STATE_LENGTH) {\n    my_vec.r = minWeightMagnitude;\n    my_vec.a = check(my_coord.y, minWeightMagnitude);\n  }\n  commit(my_vec);\n}\n"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nvoid main() {\n  init();\n  ivec4 my_vec = read();\n  if(my_coord.y == 0 && my_coord.x == STATE_LENGTH) {\n    my_vec.g = check(my_vec.b, my_vec.r);\n  }\n  if(my_coord.y == 0 && my_coord.x < HASH_LENGTH) {\n    ivec4 info_vec = read_at(ivec2(STATE_LENGTH, 0));\n    int nonce_probe = info_vec.a;\n    int row = info_vec.b;\n    ivec4 hash_vec = read_at(ivec2(my_coord.x, row));\n    my_vec.a = (hash_vec.r & nonce_probe) == 0? 1 : ((hash_vec.g & nonce_probe) == 0? -1 : 0);\n  }\n  commit(my_vec);\n}\n"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\n#define HASH_LENGTH 243\n#define NUMBER_OF_ROUNDS 81\n#define INCREMENT_START HASH_LENGTH - 64\n#define STATE_LENGTH 3 * HASH_LENGTH\n#define HALF_LENGTH 364\n#define HIGH_BITS 0xFFFFFFFF\n#define LOW_BITS 0x00000000\n"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nvoid main() {\n  init();\n  ivec4 my_vec = read();\n  if(my_coord.x >= INCREMENT_START && my_coord.x < HASH_LENGTH ) {\n    my_vec.rg = get_sum_to_index(INCREMENT_START, HASH_LENGTH, 1, my_coord.y);\n  }\n  if(my_coord.x == STATE_LENGTH ) {\n    my_vec.rg = ivec2(0);\n  }\n  my_vec.ba = my_vec.rg;\n  commit(my_vec);\n}\n"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nuniform int gr_offset;\nivec4 offset() {\n  if(my_coord.x >= HASH_LENGTH / 3 && my_coord.x < HASH_LENGTH / 3 * 2 ) {\n    ivec4 my_vec;\n    my_vec.rg = get_sum_to_index(HASH_LENGTH / 3, HASH_LENGTH / 3 * 2, my_coord.y + gr_offset, 0);\n    return my_vec;\n  } else {\n    return read_at(ivec2(my_coord.x,0));\n  }\n}\nvoid main() {\n  init();\n  commit(offset());\n}\n"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="\nivec2 twist() {\n  int alpha, beta, gamma, delta;\n  ivec4 v1, v2;\n  int j = my_coord.x;\n\n  v1 = read_at(ivec2(j == 0? 0:(((j - 1)%2)+1)*HALF_LENGTH - ((j-1)>>1), my_coord.y));\n  v2 = read_at(ivec2(((j%2)+1)*HALF_LENGTH - ((j)>>1), my_coord.y));\n  alpha = v1.b;\n  beta = v1.a;\n  gamma = v2.a;\n  delta = (alpha | (~gamma)) & (v2.b ^ beta);//v2.b === state_low[t2]\n\n  return ivec2(~delta, (alpha ^ gamma) | delta);\n}\nvoid main() {\n  init();\n  ivec4 my_vec = read();\n  if(my_coord.x < STATE_LENGTH)\n    my_vec.ba = twist();\n  commit(my_vec);\n}\n"},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),a=o(r(46)),s=o(r(47)),u=r(48),c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,o;return e=t,(r=[{key:"initialize",value:function(t,e,r){this._context=u.WebGLHelper.createContext(t),this._dimensions={x:e,y:0};var n=.5*Math.pow(this._context.MAX_TEXTURE_SIZE,2),o=Math.floor(n/this._dimensions.x/r)*this._dimensions.x*r;this._dimensions.y=o/this._dimensions.x/r,this._programs=new Map,this._ipt={data:new Int32Array(o),length:o},this._buffers={position:u.WebGLHelper.createBuffer(this._context,[-1,-1,1,-1,1,1,-1,1]),texture:u.WebGLHelper.createBuffer(this._context,[0,0,1,0,1,1,0,1]),index:u.WebGLHelper.createBuffer(this._context,[1,2,0,3,0,2],Uint16Array,this._context.ELEMENT_ARRAY_BUFFER)},this._attrib={position:0,texture:1},this._vertexArray=this._context.createVertexArray(),this._context.bindVertexArray(this._vertexArray),this.bindBuffers(),this._context.bindVertexArray(null),this.createVertexShader(),this._frameBuffer=this._context.createFramebuffer(),this._texture0=u.WebGLHelper.createTexture(this._context,this._ipt.data,this._dimensions),this._texture1=u.WebGLHelper.createTexture(this._context,new Int32Array(o),this._dimensions)}},{key:"getDimensions",value:function(){return this._dimensions}},{key:"getIpt",value:function(){return this._ipt}},{key:"addProgram",value:function(t,e){var r=this.createFragmentShader(e),n=this._context.createProgram();this._context.attachShader(n,this._vertexShader),this._context.attachShader(n,r),this._context.bindAttribLocation(n,this._attrib.position,"position"),this._context.bindAttribLocation(n,this._attrib.texture,"texture"),this._context.linkProgram(n);for(var o=new Map,i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];for(var u=0;u<a.length;u++){var c=a[u];o.set(c,this._context.getUniformLocation(n,c))}this._programs.set(t,{program:n,uniformVars:o})}},{key:"runProgram",value:function(t,e){var r=this._programs.get(t),n=r.program;if(!this._context.getProgramParameter(n,this._context.LINK_STATUS))throw new i.CryptoError("Failed to link GLSL program code");var o=r.uniformVars,a=this._context.getUniformLocation(n,"u_texture");this._context.useProgram(n);for(var s=e,c=arguments.length,f=new Array(c>2?c-2:0),l=2;l<c;l++)f[l-2]=arguments[l];for(;s-- >0;){this._context.bindTexture(this._context.TEXTURE_2D,this._texture0),this._context.activeTexture(this._context.TEXTURE0),this._context.uniform1i(a,0),this._context.viewport(0,0,this._dimensions.x,this._dimensions.y),u.WebGLHelper.frameBufferSetTexture(this._context,this._frameBuffer,this._texture1),this._context.bindVertexArray(this._vertexArray);for(var h=0;h<f.length;h++){var y=f[h];this._context.uniform1i(o.get(y.name),y.value)}this._context.drawElements(this._context.TRIANGLES,6,this._context.UNSIGNED_SHORT,0);var p=this._texture0;this._texture0=this._texture1,this._texture1=p}this.finishRun()}},{key:"readData",value:function(t,e,r,n){return this._context.bindFramebuffer(this._context.FRAMEBUFFER,this._frameBuffer),this._context.readPixels(t,e,r,n,this._context.RGBA_INTEGER,this._context.INT,this._ipt.data),this._context.bindFramebuffer(this._context.FRAMEBUFFER,null),this._ipt.data.subarray(0,this._ipt.length)}},{key:"writeData",value:function(t){this._context.bindTexture(this._context.TEXTURE_2D,this._texture0),this._context.texImage2D(this._context.TEXTURE_2D,0,this._context.RGBA32I,this._dimensions.x,this._dimensions.y,0,this._context.RGBA_INTEGER,this._context.INT,t),this._context.bindTexture(this._context.TEXTURE_2D,null)}},{key:"bindBuffers",value:function(){this._context.bindBuffer(this._context.ARRAY_BUFFER,this._buffers.texture),this._context.enableVertexAttribArray(this._attrib.texture),this._context.vertexAttribPointer(this._attrib.texture,2,this._context.FLOAT,!1,0,0),this._context.bindBuffer(this._context.ARRAY_BUFFER,this._buffers.position),this._context.enableVertexAttribArray(this._attrib.position),this._context.vertexAttribPointer(this._attrib.position,2,this._context.FLOAT,!1,0,0),this._context.bindBuffer(this._context.ELEMENT_ARRAY_BUFFER,this._buffers.index)}},{key:"createVertexShader",value:function(){if(this._vertexShader=this._context.createShader(this._context.VERTEX_SHADER),this._context.shaderSource(this._vertexShader,s.default),this._context.compileShader(this._vertexShader),!this._context.getShaderParameter(this._vertexShader,this._context.COMPILE_STATUS))throw new i.CryptoError("Could not build vertex shader.\n\n--- CODE DUMP ---".concat(s.default,"\n\n--- ERROR LOG ---\n").concat(this._context.getShaderInfoLog(this._vertexShader)))}},{key:"createFragmentShader",value:function(t){var e=this._context.createShader(this._context.FRAGMENT_SHADER);if(this._context.shaderSource(e,a.default+t),this._context.compileShader(e),!this._context.getShaderParameter(e,this._context.COMPILE_STATUS)){for(var r=t.split("\n"),n="Could not build fragment shader.\n\n------------------ KERNEL CODE DUMP ------------------\n",o=0;o<r.length;o++)n+="".concat(a.default.split("\n").length+o,"> ").concat(r[o],"\n");throw n+="\n--------------------- ERROR  LOG ---------------------\n".concat(this._context.getShaderInfoLog(e)),new i.CryptoError(n)}return e}},{key:"finishRun",value:function(){this._context.bindVertexArray(null),this._context.bindTexture(this._context.TEXTURE_2D,null),this._context.bindFramebuffer(this._context.FRAMEBUFFER,null)}}])&&n(e.prototype,r),o&&n(e,o),t}();e.WebGLWorker=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="#version 300 es\nprecision highp float;\nprecision highp int;\nprecision highp isampler2D;\nuniform isampler2D u_texture;\nin vec2 pos;\nout ivec4 color;\n//out int isFinished;\n\nvec2 size;\nivec2 my_coord;\n\nvoid init(void) {\n  //size = vec2(textureSize(u_texture, 0) - 1);\n  size = vec2(textureSize(u_texture, 0));\n  my_coord = ivec2(pos * size);\n}\n\nivec4 read(void) {\n  return texture(u_texture, pos);\n}\n\nivec4 read_at(ivec2 coord) {\n  return texelFetch(u_texture, coord, 0);\n}\n\nvoid commit(ivec4 val) {\n  color = val;\n}\n"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="#version 300 es\nlayout(location = 0) in vec2 position;\nlayout(location = 1) in vec2 texture;\nout vec2 pos;\n\nvoid main(void) {\n  pos = texture;\n  gl_Position = vec4(position.xy, 0.0, 1.0);\n}"},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=r(1),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,a;return e=t,a=[{key:"createContext",value:function(t){var e=t.getWindow();if(o.ObjectHelper.isEmpty(e)||void 0===e)throw new i.CryptoError("window is not available, you must be running in an environment with WebGL.");var r=t.getDocument(e);if(o.ObjectHelper.isEmpty(r))throw new i.CryptoError("window.document is not available, you must be running in an environment with WebGL.");var n=t.getCanvas(r);if(o.ObjectHelper.isEmpty(n))throw new i.CryptoError("The HTML5 <canvas> element is not available in your browser.",{userAgent:e.navigator.userAgent});var a=t.getWebGL(n);if(o.ObjectHelper.isEmpty(a))throw new i.CryptoError("Can not create a WebGL context on a <canvas> element.",{userAgent:e.navigator.userAgent});return a}},{key:"createBuffer",value:function(t,e,r,n){var o=t.createBuffer();return t.bindBuffer(n||t.ARRAY_BUFFER,o),t.bufferData(n||t.ARRAY_BUFFER,new(r||Float32Array)(e),t.STATIC_DRAW),o}},{key:"createTexture",value:function(t,e,r){var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32I,r.x,r.y,0,t.RGBA_INTEGER,t.INT,e),t.bindTexture(t.TEXTURE_2D,null),n}},{key:"frameBufferSetTexture",value:function(t,e,r){if(t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.checkFramebufferStatus(t.FRAMEBUFFER)!==t.FRAMEBUFFER_COMPLETE)throw new i.CryptoError("Error attaching float texture to framebuffer. Your device is probably incompatible.")}}],(r=null)&&n(e.prototype,r),a&&n(e,a),t}();e.WebGLHelper=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.ready=0]="ready",t[t.searching=1]="searching",t[t.interrupted=-1]="interrupted"}(e.PearlDiverState||(e.PearlDiverState={}))}])});